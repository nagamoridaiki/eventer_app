<!DOCTYPE html>
<html lang="ja">

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>
        <%= data.title %>
    </title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" crossorigin="anonymous">
    <link rel='stylesheet' href='/stylesheets/style.css' />
</head>

<body class="container" style="margin-top:50px;">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="row">
                    <div class="col-3">
                        <% if (data.user.image) {%>
                            <img src="/img/upload_icon/<%= data.user.image %>" width="50%" height="50%" class="img-fluid"/>
                        <% } else { %>
                            <img src="/img/upload_icon/noperson.jpg" width="50%" height="50%" class="img-fluid"/>
                        <% } %>
                    </div>
                    <div class="col-7">
                        <!-- 編集する -->
                        <% if (data.user.id == data.login.id) {%>
                        <a href="/user/<%= data.user.id %>/edit">編集する</a>
                        <% } %>

                        <!-- フォロー -->
                        <% if (data.user.id != data.login.id) {%>
                            <% if (data.follow_flg == false) {%>
                            <a href="/user/<%= data.user.id %>/follow">フォロー</a>
                            <% } else { %>
                            <a href="/user/<%= data.user.id %>/follow">フォローをはずす</a>
                            <% } %>
                        <% } %>
    
                        <div class="card-body">
                            名前
                            <hr class="mt-0 mb-2">
                            <div class="tab-content bg-light p-3">
                                <%= data.user.name %>
                            </div>
                            自己紹介
                            <hr class="mt-0 mb-2">
                            <div class="tab-content bg-light p-3">
                                <%= data.user.selfIntroduction %>
                            </div>
                            メールアドレス
                            <hr class="mt-0 mb-2">
                            <div class="tab-content bg-light p-3">
                                <%= data.user.email %>
                            </div>
                            パスワード
                            <hr class="mt-0 mb-2">
                            <div class="tab-content bg-light p-3">
                                <%= data.user.password %>
                            </div>
                            登録日時
                            <hr class="mt-0 mb-2">
                            <div class="tab-content bg-light p-3">
                                <%= data.user.createdAt %>
                            </div>
                            
                            フォロー 一覧
                            <hr class="mt-0 mb-2">
                            <div class="tab-content bg-light p-3">
                                <table>
                                    <tbody>
                                        <% data.user.follower.forEach(follower => { %>
                                            <tr><td><%= follower.name %></td></tr>
                                        <% }); %>
                                    </tbody>
                                </table>
                            </div>

                            フォロワー 一覧
                            <hr class="mt-0 mb-2">
                            <div class="tab-content bg-light p-3">
                                <table>
                                    <tbody>
                                        <% data.user.followee.forEach(followee => { %>
                                            <tr><td><%= followee.name %></td></tr>
                                        <% }); %>
                                    </tbody>
                                </table>
                            </div>


                        </div>
                    </div>
                </div>            
            </div>
        </div>  
    </div>
    <%if (data.login) {%>
        <form action="/upload" method="post" enctype="multipart/form-data">
            <br> 画像ファイル選択
            <br>
            <input type="file" name="uploadFile">
            <br>
            <input type="submit" value="Upload">
        </form>
    <% } %>

</body>

</html>